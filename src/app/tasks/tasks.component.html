<h3>Tareas Asignadas</h3>

<div class="row w-75 mx-auto mt-5 d-none d-lg-flex">
  <div class="col-12 border-bottom border-5 border-success rounded">
    <h4 class="fs-1 d-block text-primary">Tareas</h4>
  </div>
</div>

<div class="row w-75 mx-auto mt-5 d-none d-lg-flex">
  <div class="col-12 text-center">
    <button class="btn btn-primary fs-4 fw-bold" data-bs-toggle="modal" data-bs-target="#createTaskModal">Crear Tarea</button>
  </div>
</div>

<ul class="tasks--list">
  <li *ngFor="let task of tasks">
    <h6>{{ task.title}}</h6>
    <strong>{{ task.dueDate | date}}</strong>
    <button data-bs-toggle="modal" (click)="setSelectedTask(task)"
            data-bs-target="#taskModal"><i class="bi bi-chevron-double-right"></i></button>
  </li>
</ul>

<!-- Modal -->
<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="formTask" (ngSubmit)="saveTask(selectedTask)">
          <div class="mb-3">
            <label class="form-label">Titulo</label>
            <input type="text" class="form-control" formControlName="title" [value]="selectedTask?.title">
          </div>
          <div class="mb-3">
            <label class="form-label">Descripcion</label>
            <input type="text" class="form-control" formControlName="description" [value]="selectedTask?.description">
          </div>
          <div class="mb-3">
            <label class="form-label">Fecha de expiracion</label>
            <input type="date" class="form-control" formControlName="dueDate" [value]="selectedTask?.dueDate">
          </div>
          <div class="mb-3 text-center w-100">
            <button class="btn btn-success fs-5 fw-bold" type="submit">Guardar</button>
            <button class="btn btn-danger fs-5 fw-bold" type="submit" (click)="deleteTask(selectedTask)">Eliminar</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn fs-5 btn-lg btn-outline-success" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="createTaskModal" tabindex="-1" aria-labelledby="createTaksModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="formTask" (ngSubmit)="createTask()">
          <div class="mb-3">
            <label class="form-label">Titulo</label>
            <input type="text" class="form-control" formControlName="title" [value]="selectedTask?.title">
          </div>
          <div class="mb-3">
            <label class="form-label">Descripcion</label>
            <input type="text" class="form-control" formControlName="description" [value]="selectedTask?.description">
          </div>
          <div class="mb-3">
            <label class="form-label">Fecha de expiracion</label>
            <input type="date" class="form-control" formControlName="dueDate" [value]="selectedTask?.dueDate">
          </div>
          <div class="mb-3">
            <button class="btn btn-success" type="submit">Guardar</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn fs-5 btn-lg btn-outline-success" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
